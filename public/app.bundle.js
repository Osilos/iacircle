!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.color=i,this.size=50}return i(t,[{key:"getDistance",value:function(t){var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)}},{key:"hitBorder",value:function(t,e){return this.x-this.size<0||this.y-this.size<0||this.x+this.size>t||this.y+this.size>e}},{key:"draw",value:function(t){t.beginPath(),t.fillStyle="rgba(255,165,0,0.75)",t.arc(this.x,this.y,this.size,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(this.x,this.y,2,0,2*Math.PI),t.stroke(),t.fillStyle="white",t.textAlign="center",t.fillText(2*this.size,this.x,this.y-8)}}]),t}();e.default=r},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=s(n(2)),o=(s(n(3)),s(n(4))),a=s(n(6));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.context=e.getContext("2d"),this.width=e.width,this.height=e.height,this.maxWallSize=10,this.minWallSize=5,this.numberOfWall=50,this.walls=this.createNewWalls(),this.ia=new o.default(this.width,this.height,this.walls,1e4,"rgba(255,165,0,0.8)",this.context),this.iaScore=new a.default("IA",this.width-150,"black"),this.iaGeneration=new a.default("Génération",this.width/2-75,"black"),window.requestAnimationFrame(this.update.bind(this))}return i(t,[{key:"update",value:function(){this.context.clearRect(0,0,this.width,this.height),this.ia.iterate(),this.iaScore.update(2*this.ia.bigger.size),this.iaGeneration.update(this.ia.generation),this.drawWalls(),this.iaScore.draw(this.context),this.iaGeneration.draw(this.context),this.ia.bigger.draw(this.context),this.ia.isNotDone()?window.requestAnimationFrame(this.update.bind(this)):(this.drawEnd(),document.addEventListener("click",l,{once:!0}))}},{key:"drawEnd",value:function(){this.context.fillStyle="black",this.context.font="30px Arial black",this.context.fillText("CLICK TO RESTART",this.width/2,this.height/2)}},{key:"onPlayerClick",value:function(t){this.timer.isDone()||(this.circle=new r.default(t.clientX,t.clientY,"rgba(0,0,205, 0.8)"))}},{key:"createNewWalls",value:function(){for(var t=[],e=0;e<this.numberOfWall;e++)t.push(this.getNewWall());return t}},{key:"getNewWall",value:function(){return{position:{x:Math.round(Math.random()*this.width),y:Math.round(Math.random()*this.height)},size:Math.round(Math.random()*this.maxWallSize+this.minWallSize)}}},{key:"drawWalls",value:function(){var t=this;this.walls.forEach(function(e){t.context.beginPath(),t.context.fillStyle="red",t.context.arc(e.position.x,e.position.y,e.size,0,2*Math.PI),t.context.fill()})}}]),t}();function l(){new u(document.getElementById("app"))}document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("app");t.width=window.innerWidth-20,t.height=window.innerHeight-20,l()})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(n(0));var o=function(t){function e(t,n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),i(e,[{key:"update",value:function(t,e,n){var i=!0;if(this.hitBorder(e,n))i=!1;else for(var r=0;r<t.length;r++)if(this.getDistance(t[r].position)<this.size+t[r].size){i=!1;break}i&&this.size++}}]),e}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.length=e,this.reset(),this.interval=setInterval(this.tick.bind(this),100),this.timeLeft=e}return i(t,[{key:"reset",value:function(){this.endtime=Date.now()+1e3*this.length}},{key:"tick",value:function(){this.timeLeft=this.endtime-Date.now(),this.timeLeft<=0?this.clear():this.timeLeft=Math.round(this.timeLeft/100)/10}},{key:"clear",value:function(){clearInterval(this.interval),this.timeLeft=0}},{key:"isDone",value:function(){return 0===this.timeLeft}},{key:"draw",value:function(t){t.fillStyle="black",t.textAlign="left",t.font="20px Arial",t.fillText(this.timeLeft+"s",t.canvas.width/2,25)}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(n(5));var o=function(){function t(e,n,i,r,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e,this.height=n,this.walls=i,this.populationSize=1e3,this.selectionSize=50,this.color=o,this.context=a,console.log(this.color),this.bigger={size:1},this.generation=1,this.bestGeneration=1,this.stopGeneration=1e3,this.maxGeneration=r,this.population=this.createNewPopulation()}return i(t,[{key:"isNotDone",value:function(){return this.generation-this.bestGeneration<this.stopGeneration}},{key:"iterate",value:function(){this.isNotDone()?(this.scorePopulation(),this.selection(),this.reproduction(),this.generation++):console.log(this.generation)}},{key:"drawPopulation",value:function(){var t=this;this.population.forEach(function(e){t.context.beginPath();e.size,t.bigger.size;t.context.arc(e.x,e.y,e.size,0,2*Math.PI),t.context.stroke()})}},{key:"createNewPopulation",value:function(){for(var t=[],e=0;e<this.populationSize;e++){var n=Math.round(Math.random()*this.width),i=Math.round(Math.random()*this.height);Math.round(Math.random()*this.height);t.push(new r.default(n,i,this.color))}return t}},{key:"reproduction",value:function(){var t=[];for(t.push(this.population[this.population.length-1]);t.length-1<this.populationSize;){var e=this.getIndex(),n=this.getIndex();if(e!==n){var i=this.population[e].getMix(this.population[n].adn);i=i.map(function(t){return t.getMutation()}),t=t.concat(i)}}this.population=t}},{key:"getIndex",value:function(){var t=0;this.population.forEach(function(e){return t+=e.score});for(var e=Math.random()*t,n=0;n<this.population.length;n++)if((e-=this.population[n].score)<0)return n;return this.population.length-1}},{key:"selection",value:function(){this.population=this.population.sort(function(t,e){return t.score-e.score}),this.population[this.population.length-1].size>this.bigger.size&&(this.bigger=this.population[this.population.length-1],this.bestGeneration=this.generation),this.population=this.population.slice(this.population.length-this.selectionSize),this.drawPopulation()}},{key:"scorePopulation",value:function(){var t=this;this.population.forEach(function(e){e.calculateScore(t.walls,t.width,t.width,t.height)})}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(n(0));var o=function(t){function e(t,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));return r.size=1,r.adn=r.encode(t,n),r.score=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),i(e,[{key:"calculateScore",value:function(t,e,n,i){for(var r=!1;this.size<e&&!r;)if(this.size++,this.hitBorder(n,i))r=!0;else for(var o=0;o<t.length;o++)if(this.getDistance(t[o].position)<this.size+t[o].size){r=!0;break}this.size--,this.score=this.size}},{key:"getMix",value:function(t){var e=Math.floor(Math.random()*this.adn.length);this.createAgentFromAdn(this.adn.substring(0,e)+t.substring(e));return[this.createAgentFromAdn(this.adn.substring(0,e)+t.substring(e)),this.createAgentFromAdn(t.substring(0,e)+this.adn.substring(e))]}},{key:"getMutation",value:function(){for(var t=this.adn.split(""),e=[],n=(Math.floor(Math.random()*t.length),0);n<t.length;n++)Math.random()>1/30?e.push(parseInt(t[n])?0:1):e.push(t[n]);return this.createAgentFromAdn(e.join(""))}},{key:"createAgentFromAdn",value:function(t){var n=this.decode(t);return new e(n.x,n.y)}},{key:"encode",value:function(t,e){return this.fixSize(12,this.decimalToBinary(t))+this.fixSize(12,this.decimalToBinary(e))}},{key:"fixSize",value:function(t,e){for(var n=e;n.length<t;)n="0"+n;return n}},{key:"decimalToBinary",value:function(t){for(var e=t,n=[];e;)n.push(e%2),e=Math.floor(e/2);return n.reverse(),n.join("")}},{key:"decode",value:function(t){var e=t.substring(0,12),n=t.substring(12,t.length);return{x:parseInt(e,2),y:parseInt(n,2)}}}]),e}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.x=n,this.color=i,this.value=0}return i(t,[{key:"update",value:function(t){this.value<t&&(this.value=t)}},{key:"draw",value:function(t){t.fillStyle=this.color,t.textAlign="left",t.font="30px Arial "+this.color;var e=this.name+": "+(this.value?this.value:"...");t.fillText(e,this.x,40)}}]),t}();e.default=r}]);
//# sourceMappingURL=app.bundle.js.map